<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>

    <div style="display: flex; justify-content:space-between;">
        <h2>This is a pure JavaScript app</h2>
        <a href="https://github.com/kamrul1/netlify-func-hide-key" target="_blank" rel="noopener noreferrer">Github Source Control</a>
    </div>
    <p>It's purpose is to demonstrate how to use netlify to hide api key.  In this case <a href="https://www.weatherbit.io/api" target="_blank" rel="noopener noreferrer">https://www.weatherbit.io/api</a></p>
    <button type="button" onclick="handleClick(event)">Send request to netlify function</button>
    <pre id="responseData"></pre>


    <script>
        const handleClick = (e)=>{
            e.preventDefault();
            fetch('.netlify/functions/fetch-weather?city=London&country=United Kingdom')
            .then(response => response.json())
            .then(data =>{
                const resData = JSON.stringify(data, null, 2)
                console.log(resData);
                document.getElementById("responseData").innerHTML=resData
            })
        }
    </script>
</body>

</html>